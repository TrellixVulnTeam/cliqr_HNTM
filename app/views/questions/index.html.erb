<script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
<script>
  $('#upvote').click(function(){
  	console.log("upvote clicked")
  });

  $('#downvote').click(function(){
  	console.log("downvote clicked")
  });

  $(function () {
    $('#container-x').highcharts({
        chart: {
            type: "spline"
        },
        plotOptions: {
            series: {
                marker: {
                    enabled: false
                }    
            }
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: <%= @categories %>
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '°C'
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
        },
        series: [{
            name: 'Tokyo',
            data: <%= @data %>
        }]
    });
});

</script>
<h1 id="title">Lecture Questions</h1>

<div id="container-x" style="min-width: 310px; height: 400px; margin: 0 auto"> <%= @data %></div>

<h2 id="newQlink">
	<%= link_to "Add new Question", "questions/new" %>
</h2><br>
<% @questions.each do |question| %>
	
	<div class="quest">
	  <div class="span1">
	  	<%= form_for @vote, {url: question_votes_path(question) } do |f| %>
    		<%= f.hidden_field :vote_type, value: 'upvote' %>
	    <button type="submit" id="upvote" class="btn btn-sm btn-success btn-upvote">
	      <span class="glyphicon glyphicon-arrow-up"></span>&nbsp;
	    </button><br>
    	<% end %>
	    <span class="count"><%= question.upvote - question.downvote %></span><br>
	    <%= form_for @vote, {url: question_votes_path(question) } do |f| %>
    		<%= f.hidden_field :vote_type, value: 'downvote' %>
	    <button type="submit" id="downvote" class="btn btn-sm btn-danger btn-downvote">
	      <span class="glyphicon glyphicon-arrow-down"></span>&nbsp;
	    </button>
    	<% end %>
	  </div>
	  <div class="span8 question">
	    <pre><%= link_to question.text, "questions/#{question.id}" %></pre>
	  </div>
	</div>

	<% @answers.where(question_id:question.id).order('upvote - downvote DESC').each do |answer| %>

		<div class="ans">
		  <div class="span1">
		  	<%= form_for @vote, {url: answer_votes_path(answer) } do |f| %>
      			<%= f.hidden_field :vote_type, value: 'upvote' %>
		    <button type="submit" id="upvote" class="btn btn-sm btn-success btn-upvote">
		      <span class="glyphicon glyphicon-arrow-up"></span>&nbsp;
		    </button><br>
		    <% end %>
		    <span class="count"><%= answer.upvote - answer.downvote %></span><br>
		    <%= form_for @vote, {url: answer_votes_path(answer) } do |f| %>
      			<%= f.hidden_field :vote_type, value: 'downvote' %>
		    <button type="submit" id="downvote" class="btn btn-sm btn-danger btn-downvote">
		      <span class="glyphicon glyphicon-arrow-down"></span>&nbsp;
		    </button>
		    <% end %>
		  </div>
		  <div class="span6 answer">
		    <pre><%= answer.text %></pre>
		  </div>
		</div>

	<% end %>
	

<% end %>
<!-- </body>
</html> -->
